#!/bin/bash

# Admin Setup Script for Windows/PowerShell
# This script provides instructions for setting up the admin user

echo "=========================================="
echo "Prosperous Motors - Admin Setup Guide"
echo "=========================================="
echo ""
echo "To create an admin user, follow these steps:"
echo ""
echo "1. Go to your Supabase project:"
echo "   https://app.supabase.com/projects"
echo ""
echo "2. Select your project and go to Authentication > Users"
echo ""
echo "3. Click 'Add User' button and enter:"
echo "   Email: admin@prosperousmotors.com"
echo "   Password: ChangeMe123!"
echo "   Auto Confirm User Email: UNCHECK this"
echo ""
echo "4. Click 'Create User'"
echo ""
echo "5. Navigate to SQL Editor in Supabase Dashboard"
echo ""
echo "6. Run the following SQL query:"
echo ""
echo "   INSERT INTO public.user_roles (user_id, role)"
echo "   SELECT id, 'admin'::app_role FROM auth.users"
echo "   WHERE email = 'admin@prosperousmotors.com'"
echo "   ON CONFLICT (user_id, role) DO NOTHING;"
echo ""
echo "7. Then verify with:"
echo ""
echo "   SELECT u.email, ur.role"
echo "   FROM auth.users u"
echo "   LEFT JOIN public.user_roles ur ON u.id = ur.user_id"
echo "   WHERE u.email = 'admin@prosperousmotors.com';"
echo ""
echo "8. You should see:"
echo "   email                           | role"
echo "   --------------------------------|------"
echo "   admin@prosperousmotors.com     | admin"
echo ""
echo "=========================================="
echo "Admin user is now ready!"
echo "=========================================="
echo ""
echo "IMPORTANT SECURITY NOTES:"
echo "• Change the default admin password immediately in production"
echo "• Store credentials securely"
echo "• Use environment variables for sensitive data"
echo "• Enable MFA for admin accounts"
echo ""
